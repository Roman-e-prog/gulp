import React,{useState,useEffect}from"react";import*as styles from"./output.module.scss";import"react-toastify/dist/ReactToastify.css";import{ToastContainer,toast}from"react-toastify";import{MdDelete,MdModeEdit}from"react-icons/md";import Edit from"../edit/Edit";import{useTodos}from"../context";afterEach(()=>{jest.restoreAllMocks()});let Output=()=>{let{todos:t,setTodos:o}=useTodos(),[e,a]=useState(!0),[s,r]=useState(!1),[c,i]=useState(""),[d,l]=useState(null);useEffect(()=>{(async()=>{try{var t=await fetch("http://localhost:5000/api/todos/find/");if(!t.ok)throw new Error("HTTP error: Status "+t.status);var e=await t.json();o(e)}catch(t){toast.error(t.message)}finally{a(!1)}})()},[o]);return React.createElement("div",{className:styles.container},React.createElement(ToastContainer,{"data-testid":"toastContainer"}),React.createElement("h1",{className:styles.title},"Todos"),e?React.createElement("p",{"data-testid":"loader"},"...Loading"):null,t&&0<t.length?t.map(a=>React.createElement("div",{key:a.todo_id,className:styles.fieldWrapper},React.createElement("p",{className:styles.todo,"data-testid":"todoText"},a.todo),React.createElement("div",{className:styles.icon},React.createElement(MdModeEdit,{onClick:()=>{return t=a.todo_id,e=a.todo,l(t),i(e),void r(!0);var t,e},className:styles.icons}),React.createElement(MdDelete,{onClick:()=>(async t=>{try{await fetch("http://localhost:5000/api/todos/"+t,{method:"DELETE"});var e=await fetch("http://localhost:5000/api/todos/find/");if(!e.ok)throw new Error("HTTP error: Status "+e.status);var a=await e.json();o(a)}catch(t){toast.error(t.message)}})(a.todo_id),className:styles.icons})))):null,s?React.createElement(Edit,{editData:c,setEdit:r,editId:d,setTodos:o}):null)};export default Output;